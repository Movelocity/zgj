# ç®€å†ä¸Šä¼ åŠŸèƒ½å‰åç«¯é›†æˆæŒ‡å—

## æ¦‚è¿°

æœ¬æ–‡æ¡£æè¿°äº†ç®€å†ä¸Šä¼ åŠŸèƒ½çš„å‰åç«¯é›†æˆæƒ…å†µï¼ŒåŒ…æ‹¬æ•°æ®è¡¨ç»“æ„ã€APIæ¥å£ã€å‰ç«¯ç»„ä»¶ä»¥åŠæµ‹è¯•æ–¹æ³•ã€‚

## åç«¯æ•°æ®è¡¨ç»“æ„

### 1. ResumeRecord è¡¨ (ä¸»è¦ç®€å†è¡¨)
```sql
- id: ç®€å†ID (TLID)
- user_id: ç”¨æˆ·ID
- resume_number: ç®€å†ç¼–å· (æ ¼å¼: R{ç”¨æˆ·IDå6ä½}{åºå·})
- version: ç‰ˆæœ¬å·
- name: ç®€å†åç§°
- original_filename: åŸå§‹æ–‡ä»¶å
- file_path: æ–‡ä»¶å­˜å‚¨è·¯å¾„
- file_size: æ–‡ä»¶å¤§å°
- file_type: æ–‡ä»¶ç±»å‹
- text_content: çº¯æ–‡æœ¬å†…å®¹
- structured_data: ç»“æ„åŒ–æ•°æ® (JSON)
- status: çŠ¶æ€ (active/deleted)
- created_at: åˆ›å»ºæ—¶é—´
- updated_at: æ›´æ–°æ—¶é—´
```

### 2. File è¡¨ (ç»Ÿä¸€æ–‡ä»¶ç®¡ç†è¡¨)
```sql
- id: æ–‡ä»¶ID (TLID)
- original_name: åŸå§‹æ–‡ä»¶å
- extension: æ–‡ä»¶æ‰©å±•å
- mime_type: MIMEç±»å‹
- size: æ–‡ä»¶å¤§å°
- created_by: ä¸Šä¼ ç”¨æˆ·ID
- created_at: åˆ›å»ºæ—¶é—´
- updated_at: æ›´æ–°æ—¶é—´
```

### 3. UserProfile è¡¨ (æ—§ç‰ˆç”¨æˆ·æ¡£æ¡ˆè¡¨)
```sql
- id: æ¡£æ¡ˆID
- user_id: ç”¨æˆ·ID
- data: ç”¨æˆ·ç”»åƒæ•°æ® (JSON)
- resumes: ç®€å†åˆ—è¡¨ (JSON) - å·²åºŸå¼ƒï¼Œè¿ç§»åˆ°ResumeRecordè¡¨
```

## API æ¥å£

### ç®€å†ä¸“ç”¨æ¥å£
- `POST /api/user/resumes/upload` - ä¸Šä¼ ç®€å† (ä½¿ç”¨ResumeRecordè¡¨)
- `GET /api/user/resumes` - è·å–ç®€å†åˆ—è¡¨
- `GET /api/user/resumes/:id` - è·å–ç®€å†è¯¦æƒ…
- `PUT /api/user/resumes/:id` - æ›´æ–°ç®€å†ä¿¡æ¯
- `DELETE /api/user/resumes/:id` - åˆ é™¤ç®€å†

### é€šç”¨æ–‡ä»¶æ¥å£
- `POST /api/files/upload` - é€šç”¨æ–‡ä»¶ä¸Šä¼  (ä½¿ç”¨Fileè¡¨)
- `GET /api/files/:id/preview` - æ–‡ä»¶é¢„è§ˆ/ä¸‹è½½ (å…¬å¼€è®¿é—®)
- `GET /api/files/:id/info` - è·å–æ–‡ä»¶ä¿¡æ¯ (å…¬å¼€è®¿é—®)

### ç®¡ç†å‘˜æ¥å£
- `GET /api/admin/files` - è·å–æ–‡ä»¶åˆ—è¡¨
- `GET /api/admin/files/stats` - è·å–æ–‡ä»¶ç»Ÿè®¡
- `DELETE /api/admin/files/:id` - åˆ é™¤æ–‡ä»¶
- `POST /api/admin/files/batch-delete` - æ‰¹é‡åˆ é™¤æ–‡ä»¶

## å‰ç«¯ç»„ä»¶

### 1. ResumeList.tsx
- å®Œæ•´çš„ç®€å†åˆ—è¡¨é¡µé¢
- æ”¯æŒç®€å†ä¸Šä¼ ã€æŸ¥çœ‹ã€ä¸‹è½½ã€åˆ é™¤
- åˆ†é¡µæ˜¾ç¤º
- æ–‡ä»¶ç±»å‹å’Œå¤§å°éªŒè¯

### 2. SimpleResume.tsx
- ç®€å†ä¼˜åŒ–é¡µé¢
- é›†æˆäº†ç®€å†ä¸Šä¼ åŠŸèƒ½
- æ¨¡æ‹ŸAIä¼˜åŒ–æµç¨‹

### 3. ResumeUploadTest.tsx
- ä¸“é—¨çš„æµ‹è¯•é¡µé¢
- æµ‹è¯•æ–‡ä»¶ä¸Šä¼ ã€é¢„è§ˆã€ä¸‹è½½åŠŸèƒ½
- è¯¦ç»†çš„æµ‹è¯•æ—¥å¿—

### 4. ResumeEditor.tsx (é™„ä»¶ä¸­çš„ç»„ä»¶)
- ç®€å†ç¼–è¾‘å™¨ç»„ä»¶
- æ”¯æŒåœ¨çº¿ç¼–è¾‘ç®€å†å†…å®¹

## å‰ç«¯ç±»å‹å®šä¹‰

### ä¸»è¦ç±»å‹
```typescript
// ç®€å†åŸºæœ¬ä¿¡æ¯
interface ResumeInfo {
  id: string;
  resume_number: string;
  version: number;
  name: string;
  original_filename: string;
  file_path: string;
  file_size: number;
  file_type: string;
  status: string;
  created_at: string;
  updated_at: string;
}

// ç®€å†ä¸Šä¼ å“åº”
interface ResumeUploadResponse {
  id: string;
  resume_number: string;
  url: string;
  filename: string;
  size: number;
}

// æ–‡ä»¶ä¸Šä¼ å“åº”
interface FileUploadResponse {
  id: string;
  name: string;
  size: number;
  extension: string;
  mime_type: string;
  created_by: string;
  created_at: string;
}
```

## æµ‹è¯•æ­¥éª¤

### 1. å¯åŠ¨åç«¯æœåŠ¡
```bash
cd server
go run main.go
```

### 2. å¯åŠ¨å‰ç«¯æœåŠ¡
```bash
cd web
pnpm dev
```

### 3. è®¿é—®æµ‹è¯•é¡µé¢
- ç®€å†åˆ—è¡¨: `http://localhost:5173/resume/list`
- ç®€å†ä¼˜åŒ–: `http://localhost:5173/resume/simple`
- ä¸Šä¼ æµ‹è¯•: `http://localhost:5173/resume/upload-test` (éœ€è¦æ·»åŠ è·¯ç”±)

### 4. æµ‹è¯•åŠŸèƒ½
1. **æ–‡ä»¶ä¸Šä¼ æµ‹è¯•**
   - é€‰æ‹©PDF/DOC/DOCXæ–‡ä»¶
   - éªŒè¯æ–‡ä»¶ç±»å‹å’Œå¤§å°é™åˆ¶
   - æ£€æŸ¥ä¸Šä¼ å“åº”æ•°æ®

2. **æ–‡ä»¶é¢„è§ˆæµ‹è¯•**
   - ç‚¹å‡»é¢„è§ˆæŒ‰é’®
   - éªŒè¯æ–‡ä»¶èƒ½å¦åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€

3. **æ–‡ä»¶ä¸‹è½½æµ‹è¯•**
   - ç‚¹å‡»ä¸‹è½½æŒ‰é’®
   - éªŒè¯æ–‡ä»¶èƒ½å¦æ­£ç¡®ä¸‹è½½

4. **ç®€å†ç®¡ç†æµ‹è¯•**
   - æŸ¥çœ‹ç®€å†åˆ—è¡¨
   - åˆ é™¤ç®€å†
   - åˆ†é¡µåŠŸèƒ½

## é›†æˆçŠ¶æ€

### âœ… å·²å®Œæˆ
- [x] åç«¯æ•°æ®è¡¨æ¨¡å‹åˆ†æ
- [x] APIæ¥å£æ¢³ç†å’ŒéªŒè¯
- [x] å‰ç«¯ç±»å‹å®šä¹‰æ›´æ–°
- [x] å‰ç«¯APIè°ƒç”¨ä¿®å¤
- [x] ç®€å†åˆ—è¡¨ç»„ä»¶å®ç°
- [x] ç®€å†ä¸Šä¼ åŠŸèƒ½é›†æˆ
- [x] æµ‹è¯•é¡µé¢åˆ›å»º

### ğŸ”„ è¿›è¡Œä¸­
- [ ] å®Œæ•´çš„ç«¯åˆ°ç«¯æµ‹è¯•
- [ ] é”™è¯¯å¤„ç†ä¼˜åŒ–

### ğŸ“‹ å¾…åŠäº‹é¡¹
- [ ] æ·»åŠ æ–‡ä»¶ä¸Šä¼ è¿›åº¦æ˜¾ç¤º
- [ ] å®ç°ç®€å†å†…å®¹è§£æåŠŸèƒ½
- [ ] æ·»åŠ ç®€å†ç‰ˆæœ¬ç®¡ç†
- [ ] ä¼˜åŒ–æ–‡ä»¶å­˜å‚¨ç­–ç•¥
- [ ] æ·»åŠ æ–‡ä»¶å®‰å…¨æ‰«æ

## æ³¨æ„äº‹é¡¹

1. **æ–‡ä»¶å­˜å‚¨è·¯å¾„**: åç«¯ä½¿ç”¨TLIDå‰6ä½ä½œä¸ºç›®å½•ç»“æ„
2. **æ–‡ä»¶è®¿é—®**: é¢„è§ˆå’Œä¸‹è½½æ¥å£ä¸ºå…¬å¼€è®¿é—®ï¼Œæ— éœ€è®¤è¯
3. **æ–‡ä»¶ç±»å‹é™åˆ¶**: ä»…æ”¯æŒPDFã€DOCã€DOCXæ ¼å¼
4. **æ–‡ä»¶å¤§å°é™åˆ¶**: æœ€å¤§10MB
5. **æ•°æ®è¿ç§»**: æ”¯æŒä»æ—§çš„UserProfileè¡¨è¿ç§»æ•°æ®åˆ°æ–°çš„ResumeRecordè¡¨

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜
1. **æ–‡ä»¶ä¸Šä¼ å¤±è´¥**: æ£€æŸ¥æ–‡ä»¶å¤§å°å’Œç±»å‹é™åˆ¶
2. **æ–‡ä»¶é¢„è§ˆå¤±è´¥**: æ£€æŸ¥æ–‡ä»¶è·¯å¾„å’Œå­˜å‚¨æƒé™
3. **APIè°ƒç”¨å¤±è´¥**: æ£€æŸ¥è®¤è¯çŠ¶æ€å’Œç½‘ç»œè¿æ¥
4. **ç±»å‹é”™è¯¯**: ç¡®ä¿å‰åç«¯æ•°æ®ç»“æ„ä¸€è‡´

### è°ƒè¯•å·¥å…·
- æµè§ˆå™¨å¼€å‘è€…å·¥å…·ç½‘ç»œé¢æ¿
- åç«¯æ—¥å¿—è¾“å‡º
- æµ‹è¯•é¡µé¢çš„è¯¦ç»†æ—¥å¿—åŠŸèƒ½
