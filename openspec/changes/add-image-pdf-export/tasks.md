# Implementation Tasks

## 1. 依赖安装
- [x] 1.1 安装 `html2canvas` 和 `jspdf` 包
- [x] 1.2 安装对应的 TypeScript 类型定义（如需要）

## 2. 实现Canvas导出功能
- [x] 2.1 在 `web/src/utils/pdfExport.ts` 中实现 `exportElementToPDFViaCanvas` 函数
- [x] 2.2 处理Canvas渲染配置（DPI至少200、色彩空间等）
- [x] 2.3 实现A4页面尺寸计算（210mm × 297mm）
- [x] 2.4 实现页边距计算（上下左右各2rem）
- [x] 2.5 实现智能分页算法
  - [x] 2.5.1 计算每页可用高度
  - [x] 2.5.2 检测DOM元素边界位置
  - [x] 2.5.3 避免在标题和内容之间分页
  - [x] 2.5.4 避免在列表项中间分页
- [x] 2.6 实现多页PDF生成（jspdf addPage）
- [x] 2.7 添加错误处理和用户提示

## 3. 创建Split Button导出组件
- [x] 3.1 创建 `ExportSplitButton` 组件在 `web/src/pages/editor/components/` 目录
- [x] 3.2 实现Split Button UI结构
  - [x] 3.2.1 主体按钮区域（点击触发默认导出）
  - [x] 3.2.2 右侧角标区域（下拉箭头，点击显示菜单）
  - [x] 3.2.3 两个区域的视觉分割（边框或背景色）
- [x] 3.3 使用 `@radix-ui/react-dropdown-menu` 实现下拉菜单
- [x] 3.4 添加两个菜单选项：文字PDF、图片PDF
- [x] 3.5 为每个选项添加图标和说明文字
- [x] 3.6 显示当前默认选项的选中标记

## 4. 集成到简历编辑页
- [x] 4.1 在 `ResumeDetails.tsx` 中引入 `ExportSplitButton` 组件
- [x] 4.2 替换现有的"导出PDF"按钮为Split Button
- [x] 4.3 连接按钮主体到默认的文字PDF导出方法
- [x] 4.4 连接两个菜单项到对应的导出方法
- [x] 4.5 添加加载状态提示（Canvas导出可能需要较长时间）
- [x] 4.6 确保按钮样式与现有UI风格一致

## 5. 测试验证
- [ ] 5.1 测试Split Button UI交互
  - [ ] 5.1.1 点击主体按钮直接触发打印
  - [ ] 5.1.2 点击角标显示下拉菜单
  - [ ] 5.1.3 菜单项选择后正确执行
- [ ] 5.2 测试文字PDF导出功能（浏览器打印）
- [ ] 5.3 测试图片PDF导出功能
- [ ] 5.4 验证色彩一致性（对比两种导出方式）
- [ ] 5.5 测试多页简历的导出
  - [ ] 5.5.1 验证分页位置正确
  - [ ] 5.5.2 验证页边距正确（2rem）
  - [ ] 5.5.3 确认无内容截断
- [ ] 5.6 测试不同长度的简历（1页、2页、3页+）
- [ ] 5.7 测试错误场景（如DOM元素未找到、Canvas渲染失败）

## 6. 文档和优化
- [ ] 6.1 更新相关文档说明两种导出方式的差异
- [ ] 6.2 优化Canvas导出性能（如需要）
- [ ] 6.3 添加用户引导提示（可选）

